{"version":3,"sources":["day8/re_frame_10x/panels/timing/views.cljs"],"mappings":"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","names":["day8.re-frame-10x.panels.timing.views/ms->str","ms","cljs.core._EQ_","js/Math.round","day8.re-frame-10x.panels.timing.views/tag-style-factory$","style-name49147","params49148","base-style49152","key__47223__auto__","cljs.core/meta","cljs.core/first","name49151","fexpr__49174","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.util/build-style-name","style49150","cljs.core.into","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.runtime/compile-css","factory-name49149","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.util/factory->name","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.runtime/ensure-style!","day8.re-frame-10x.panels.timing.views/tag-style","ambiance","day8.re-frame-10x.styles/frame-uncommon","p__49182","map__49183","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","day8.re-frame-10x.panels.timing.views/tag","label","time","cljs.core/deref","day8.re_frame_10x.inlined_deps.re_frame.v1v1v2.re_frame.core.subscribe","day8.re-frame-10x.components.re-com/v-box","day8.re-frame-10x.styles/gs-5s","day8.re-frame-10x.components.re-com/label","day8.re-frame-10x.components.data/tag","day8.re-frame-10x.panels.timing.views/section-style-factory$","style-name49185","params49186","base-style49190","name49189","fexpr__49192","style49188","factory-name49187","day8.re-frame-10x.panels.timing.views/section-style","day8.re-frame-10x.styles/frame-1","day8.re-frame-10x.styles/gs-12","day8.re-frame-10x.styles/gs-19","day8.re-frame-10x.panels.timing.views/elapsed","day8.re-frame-10x.components.re-com/h-box","day8.re-frame-10x.styles/gs-12s","day8.re-frame-10x.components.re-com/box","day8.re-frame-10x.styles/gs-81s","day8.re-frame-10x.components.re-com/hyperlink","day8.re-frame-10x.styles/hyperlink","day8.re-frame-10x.panels.timing.views/event-processing","times","day8.re-frame-10x.panels.timing.views/animation-frames","n","iter__4529__auto__","s__49201","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__49203","cljs.core/chunk-buffer","i__49202","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__49200","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","i","cljs.core.range","day8.re-frame-10x.panels.timing.views/panel-style-factory$","style-name49235","params49236","base-style49240","name49239","fexpr__49247","style49238","factory-name49237","day8.re-frame-10x.panels.timing.views/panel-style","day8.re-frame-10x.styles/gs-5","day8.re-frame-10x.panels.timing.views/panel","available?","cljs.core/chunk-first"],"sourcesContent":["(ns day8.re-frame-10x.panels.timing.views\n  (:require\n    [day8.re-frame-10x.inlined-deps.re-frame.v1v1v2.re-frame.core :as rf]\n    [day8.re-frame-10x.inlined-deps.garden.v1v3v10.garden.units :refer [px]]\n    [day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.core :refer [defclass]]\n    [day8.re-frame-10x.components.re-com :as rc]\n    [day8.re-frame-10x.styles :as styles]\n    [day8.re-frame-10x.panels.settings.subs :as settings.subs]\n    [day8.re-frame-10x.panels.timing.subs :as timing.subs]\n    [day8.re-frame-10x.components.data :as data]))\n\n(defn ms->str\n  [ms]\n  (cond\n    (nil? ms) \"-\"\n    (= ms 0) (str \"0ms\")\n    (< ms 0.1) (str \"<0.1ms\")\n    (< ms 1) (str (.toFixed ms 1) \"ms\")\n    (some? ms) (str (js/Math.round ms) \"ms\")))\n\n(defclass tag-style\n  [ambiance]\n  {:composes (styles/frame-uncommon ambiance)})\n\n(defn tag\n  [{:keys [label time]}]\n  (let [ambiance @(rf/subscribe [::settings.subs/ambiance])]\n    [rc/v-box\n     :align    :center\n     :gap      styles/gs-5s\n     :children\n     [[rc/label :label label]\n      [data/tag (tag-style ambiance) (ms->str time)]]]))\n\n(defclass section-style\n  [ambiance]\n  {:composes      (styles/frame-1 ambiance)\n   :padding       styles/gs-12\n   :margin-bottom styles/gs-19})\n\n(defn elapsed\n  []\n  (let [ambiance @(rf/subscribe [::settings.subs/ambiance])\n        time     @(rf/subscribe [::timing.subs/total-epoch-time])]\n    [rc/h-box\n     :class    (section-style ambiance)\n     :align    :center\n     :gap      styles/gs-12s\n     :children\n     [[rc/box\n       :align   :center\n       :justify :center\n       :width   styles/gs-81s\n       :child\n       [rc/label\n        :label \"elapsed\"]]\n      [tag\n       {:label \"\"\n        :time  time}]\n      [rc/hyperlink\n       :class  (styles/hyperlink ambiance)\n       :label  \"guide me to greatness\"\n       :target \"_blank\"\n       :href   \"https://github.com/day8/re-frame-10x/blob/master/docs/HyperlinkedInformation/UnderstandingTiming.md\"]]]))\n\n(defn event-processing\n  []\n  (let [ambiance @(rf/subscribe [::settings.subs/ambiance])\n        times    @(rf/subscribe [::timing.subs/event-processing-time])]\n    [rc/h-box\n     :class    (section-style ambiance)\n     :align    :center\n     :gap      styles/gs-12s\n     :children\n     [[rc/v-box\n       :align    :center\n       :width    styles/gs-81s\n       :children\n       [[rc/label\n         :label \"event\"]\n        [rc/label\n         :label \"processing\"]]]\n      [tag\n       {:label \"total\"\n        :time  (:timing/event-total times)}]\n      [:span \"=\"]\n      [tag\n       {:label \"handler\"\n        :time  (:timing/event-handler times)}]\n      [:span \"+\"]\n      [tag\n       {:label \"effects\"\n        :time  (:timing/event-effects times)}]\n      [:span \"+\"]\n      [tag\n       {:label \"misc\"\n        :time  (:timing/event-misc times)}]]]))\n\n(defn animation-frames\n  []\n  (let [ambiance @(rf/subscribe [::settings.subs/ambiance])\n        n        @(rf/subscribe [::timing.subs/animation-frame-count])]\n    (into\n      [:<>]\n      (for [i    (range 1 (inc n))\n            :let [times @(rf/subscribe [::timing.subs/animation-frame-time i])]]\n        [rc/h-box\n         :class (section-style ambiance)\n         :align :center\n         :gap   styles/gs-12s\n         :children\n         [[rc/v-box\n           :align    :center\n           :width    styles/gs-81s\n           :children\n           [[rc/label\n             :label \"animation\"]\n            [rc/label\n             :label  (str \"frame #\" i)]]]\n          [tag\n           {:label \"total\"\n            :time  (:timing/animation-frame-total times)}]\n          [:span \"=\"]\n          [tag\n           {:label \"subs\"\n            :time  (:timing/animation-frame-subs times)}]\n          [:span \"+\"]\n          [tag\n           {:label \"views\"\n            :time  (:timing/animation-frame-render times)}]\n          [:span \"+\"]\n          [tag\n           {:label \"react, etc\"\n            :time  (:timing/animation-frame-misc times)}]]]))))\n\n(defclass panel-style\n  [ambiance]\n  {:margin-right styles/gs-5})\n\n\n(defn panel\n  []\n  (let [ambiance   @(rf/subscribe [::settings.subs/ambiance])\n        available? @(rf/subscribe [::timing.subs/data-available?])]\n    (if available?\n      [rc/v-box\n       :class    (panel-style ambiance)\n       :children\n       [[elapsed]\n        [event-processing]\n        [animation-frames]]]\n      [rc/v-box\n       :class    (panel-style ambiance)\n       :children\n       [[rc/label\n         :label \"No timing data is currently available.\"]]])))"]}