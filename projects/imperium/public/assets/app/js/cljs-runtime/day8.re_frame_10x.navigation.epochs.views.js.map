{"version":3,"sources":["day8/re_frame_10x/navigation/epochs/views.cljs"],"mappings":"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","names":["day8.re-frame-10x.navigation.epochs.views/epoch-style-factory$","style-name48020","params48021","base-style48025","key__47223__auto__","cljs.core/meta","cljs.core/first","name48024","fexpr__48026","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.util/build-style-name","style48023","cljs.core.into","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.runtime/compile-css","factory-name48022","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.util/factory->name","day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.runtime/ensure-style!","day8.re-frame-10x.navigation.epochs.views/epoch-style","ambiance","active?","cljs.core/not","day8.re-frame-10x.styles/nord4","day8.re-frame-10x.navigation.epochs.views/epoch-data-style-factory$","style-name48027","params48028","base-style48032","name48031","fexpr__48034","style48030","factory-name48029","day8.re-frame-10x.navigation.epochs.views/epoch-data-style","cljs.core._EQ_","day8.re-frame-10x.styles/nord0","day8.re-frame-10x.navigation.epochs.views/epoch","hover?","day8.re_frame_10x.inlined_deps.reagent.v1v0v0.reagent.core.atom","day8.re_frame_10x.inlined_deps.reagent.v1v0v0.reagent.core.create_class","this","cljs.core/deref","day8.re-frame-10x.inlined-deps.reagent.v1v0v0.reagent.dom/dom-node","event","id","day8.re_frame_10x.inlined_deps.re_frame.v1v1v2.re_frame.core.subscribe","current-id","cljs.core/reset!","day8.re-frame-10x.components.re-com/h-box","day8.re-frame-10x.styles/gs-19s","day8.re-frame-10x.inlined-deps.re-frame.v1v1v2.re-frame.core/dispatch","or__4126__auto__","day8.re-frame-10x.components.re-com/box","day8.re-frame-10x.styles/nord13","day8.re-frame-10x.material/chevron-right","day8.re-frame-10x.components.re-com/gap-f","day8.re-frame-10x.styles/gs-2s","day8.re-frame-10x.components.cljs-devtools/simple-render","day8.re-frame-10x.navigation.epochs.views/epochs-style-factory$","style-name48037","params48038","base-style48042","name48041","fexpr__48051","style48040","factory-name48039","day8.re-frame-10x.navigation.epochs.views/epochs-style","day8.re-frame-10x.styles/background","day8.re-frame-10x.navigation.epochs.views/epochs","all-events","day8.re-frame-10x.components.re-com/v-box","day8.re-frame-10x.styles/gs-131s","iter__4529__auto__","s__48057","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__48059","cljs.core/chunk-buffer","i__48058","vec__48061","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__48056","cljs.core/chunk-rest","vec__48064","cljs.core/cons","cljs.core/rest","cljs.core/reverse","cljs.core/not-empty","day8.re-frame-10x.navigation.epochs.views/prev-button","older-epochs-available?","day8.re-frame-10x.components.buttons/icon","day8.re-frame-10x.material/arrow-left","day8.re-frame-10x.navigation.epochs.views/next-button","newer-epochs-available?","day8.re-frame-10x.material/arrow-right","day8.re-frame-10x.navigation.epochs.views/latest-button","day8.re-frame-10x.material/skip-next","day8.re-frame-10x.navigation.epochs.views/left-buttons","day8.re-frame-10x.styles/gs-12s","day8.re-frame-10x.navigation.epochs.views/settings-button","day8.re-frame-10x.material/settings","day8.re-frame-10x.navigation.epochs.views/ambiance-button","day8.re-frame-10x.material/light-mode","day8.re-frame-10x.material/dark-mode","cljs.core/chunk-first"],"sourcesContent":["(ns day8.re-frame-10x.navigation.epochs.views\n  (:require\n    [day8.re-frame-10x.inlined-deps.reagent.v1v0v0.reagent.core   :as r]\n    [day8.re-frame-10x.inlined-deps.reagent.v1v0v0.reagent.dom    :as rdom]\n    [day8.re-frame-10x.inlined-deps.re-frame.v1v1v2.re-frame.core :as rf]\n    [day8.re-frame-10x.inlined-deps.garden.v1v3v10.garden.units   :as units :refer [em px percent]]\n    [day8.re-frame-10x.inlined-deps.spade.v1v1v0.spade.core       :refer [defclass]]\n    [day8.re-frame-10x.components.buttons                         :as buttons]\n    [day8.re-frame-10x.components.re-com                          :as rc]\n    [day8.re-frame-10x.material                                   :as material]\n    [day8.re-frame-10x.components.cljs-devtools                   :as cljs-devtools]\n    [day8.re-frame-10x.navigation.epochs.events                   :as epochs.events]\n    [day8.re-frame-10x.navigation.epochs.subs                     :as epochs.subs]\n    [day8.re-frame-10x.panels.settings.events                     :as settings.events]\n    [day8.re-frame-10x.panels.settings.subs                       :as settings.subs]\n    [day8.re-frame-10x.styles                                     :as styles]))\n\n(defclass epoch-style\n  [ambiance active?]\n  {:cursor (if (not active?) :pointer :default)}\n  [:svg :path\n   {:fill (if active? :#fff styles/nord4)}]\n  [:&:hover\n   [:svg :path\n    {:fill (if active? :#fff :#fff)}]])\n\n(defclass epoch-data-style\n  [ambiance]\n  {:background-color (if (= ambiance :bright) :#fff styles/nord0)})\n\n(defn epoch\n  []\n  (let [hover?     (r/atom false)\n        active?    (r/atom false)]\n    (r/create-class\n      {:component-did-mount\n       (fn [this]\n         (when @active?\n           (.scrollIntoView (rdom/dom-node this))))\n\n       :component-did-update\n       (fn [this]\n         (when @active?\n           (.scrollIntoView (rdom/dom-node this))))\n\n       :reagent-render\n       (fn [event id]\n         (let [ambiance   @(rf/subscribe [::settings.subs/ambiance])\n               current-id @(rf/subscribe [::epochs.subs/selected-epoch-id])]\n           (reset! active? (= id current-id))\n           [rc/h-box\n            :class    (epoch-style ambiance @active?)\n            :align    :center\n            :height   styles/gs-19s\n            :attr     {:on-click       #(when-not @active? (rf/dispatch [::epochs.events/load id]))\n                       :on-mouse-enter #(reset! hover? true)\n                       :on-mouse-leave #(reset! hover? false)}\n            :children [(if (or @active? @hover?)\n                         [rc/box\n                          :height styles/gs-19s\n                          :align :center\n                          :style {:background-color styles/nord13}\n                          :child [material/chevron-right\n                                  {:size \"17px\"}]]\n                         [material/chevron-right\n                          {:size \"17px\"}])\n                       [rc/gap-f :size styles/gs-2s]\n                       [rc/box\n                        :class  (epoch-data-style ambiance)\n                        :height styles/gs-19s\n                        :size  \"1\"\n                        :child [cljs-devtools/simple-render event []]]]]))})))\n\n(defclass epochs-style\n  [ambiance]\n  {:composes     (styles/background ambiance)\n   :overflow-y   :auto\n   #_#_:padding-left styles/gs-2s})\n\n(defn epochs\n  []\n  (let [ambiance   @(rf/subscribe [::settings.subs/ambiance])\n        all-events @(rf/subscribe [::epochs.subs/events-by-id])]\n    [rc/v-box\n     :class    (epochs-style ambiance)\n     :height   styles/gs-131s\n     :children (into [[rc/gap-f :size styles/gs-2s]]\n                     (for [[id event] (reverse all-events)\n                           :when (not-empty event)]\n                       [:<>\n                        [epoch event id]\n                        [rc/gap-f :size styles/gs-2s]]))]))\n\n\n\n(defn prev-button\n  []\n  (let [older-epochs-available? @(rf/subscribe [::epochs.subs/older-epochs-available?])]\n    [buttons/icon\n     {:icon      [material/arrow-left]\n      :title     (if older-epochs-available? \"Previous epoch\" \"There are no previous epochs\")\n      :disabled? (not older-epochs-available?)\n      :on-click  #(rf/dispatch [::epochs.events/previous])}]))\n\n(defn next-button\n  []\n  (let [newer-epochs-available? @(rf/subscribe [::epochs.subs/newer-epochs-available?])]\n    [buttons/icon\n     {:icon      [material/arrow-right]\n      :title     (if newer-epochs-available? \"Next epoch\" \"There are no later epochs\")\n      :disabled? (not newer-epochs-available?)\n      :on-click  #(rf/dispatch [::epochs.events/next])}]))\n\n(defn latest-button\n  []\n  (let [newer-epochs-available? @(rf/subscribe [::epochs.subs/newer-epochs-available?])]\n    [buttons/icon\n     {:icon      [material/skip-next]\n      :title     (if newer-epochs-available? \"Skip to latest epoch\" \"Already showig latest epoch\")\n      :disabled? (not newer-epochs-available?)\n      :on-click  #(rf/dispatch [::epochs.events/most-recent])}]))\n\n(defn left-buttons\n  []\n  [rc/h-box\n   :size     \"1\"\n   :gap      styles/gs-12s\n   :align    :center\n   :children [[prev-button]\n              [next-button]\n              [latest-button]]])\n\n(defn settings-button\n  []\n  [buttons/icon\n   {:icon     [material/settings]\n    :title    \"Settings\"\n    :on-click #(rf/dispatch [::settings.events/toggle])}])\n\n(defn ambiance-button\n  []\n  (let [ambiance @(rf/subscribe [::settings.subs/ambiance])]\n    [buttons/icon\n     {:icon (if (= ambiance :bright)\n              [material/light-mode]\n              [material/dark-mode])\n      :title (if (= ambiance :bright)\n               \"Dark ambiance\"\n               \"Bright ambiance\")\n      :on-click #(rf/dispatch [::settings.events/set-ambiance (if (= ambiance :bright) :dark :bright)])}]))\n"]}